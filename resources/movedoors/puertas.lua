local puertas_carcel = {
-------CARCELES--------
	[26] = {model=2930,scale=1,dim=252,inte=4,x=76.23046875,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=74.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[25] = {model=2930,scale=1,dim=252,inte=4,x=72.2197265625,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=70.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[24] = {model=2930,scale=1,dim=252,inte=4,x=68.3,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=66.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[23] = {model=2930,scale=1,dim=252,inte=4,x=64.2333984375,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=62.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[22] = {model=2930,scale=1,dim=252,inte=4,x=60.2333984375,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=58.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[21] = {model=2930,scale=1,dim=252,inte=4,x=56.2333984375,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=54.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[20] = {model=2930,scale=1,dim=252,inte=4,x=52.2333984375,y=-329.7001953125,z=2524,rotx=0,roty=0,rotz=270,movex=50.75,movey=-329.7001953125,movez=2524,mrotx=0,mroty=0,mrotz=0},
	[40] = {model=2930,scale=1,dim=252,inte=4,x=48.8603515625,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=50.75,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[39] = {model=2930,scale=1,dim=252,inte=4,x=52.7216796875,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=54.3,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[38] = {model=2930,scale=1,dim=252,inte=4,x=56.744140625,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=58.3,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[37] = {model=2930,scale=1,dim=252,inte=4,x=60.73046875,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=62.3,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[36] = {model=2930,scale=1,dim=252,inte=4,x=64.7197265625,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=66.3,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[35] = {model=2930,scale=1,dim=252,inte=4,x=68.7197265625,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=70.3,movey=-305.9765625,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[34] = {model=2930,scale=1,dim=252,inte=4,x=72.75,y=-305.9765625,z=2528.1101074219,rotx=0,roty=0,rotz=90,movex=74.3,movey=50.3,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[33] = {model=2930,scale=1,dim=252,inte=4,x=76.23046875,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=74.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[32] = {model=2930,scale=1,dim=252,inte=4,x=72.2197265625,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=70.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[31] = {model=2930,scale=1,dim=252,inte=4,x=68.3,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=66.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[30] = {model=2930,scale=1,dim=252,inte=4,x=64.2333984375,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=62.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[29] = {model=2930,scale=1,dim=252,inte=4,x=60.2333984375,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=58.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[28] = {model=2930,scale=1,dim=252,inte=4,x=56.2333984375,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=54.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[27] = {model=2930,scale=1,dim=252,inte=4,x=52.2333984375,y=-329.7001953125,z=2528.1101074219,rotx=0,roty=0,rotz=270,movex=50.75,movey=-329.7001953125,movez=2528.1101074219,mrotx=0,mroty=0,mrotz=0},
	[41] = {model=980,scale=1,dim=0,inte=0,x=1029.4404296875,y=-366.400390625,z=78.300003051758,rotx=0,roty=0,rotz=180,movex=1029.4404296875,movey=-366.400390625,movez=72.6,mrotx=0,mroty=0,mrotz=0},
	[2] = {model=980,scale=1,dim=0,inte=0,x=1015.2197265625,y=-379,z=78.300003051758,rotx=0,roty=0,rotz=180,movex=1015.2197265625,movey=-379,movez=72.6,mrotx=0,mroty=0,mrotz=0},
	[3] = {model=8674,scale=1,dim=252,inte=4,x=-16.7001953125,y=-325.400390625,z=2522.8999023438,rotx=0,roty=0,rotz=270,movex=-16.7001953125,movey=-325.400390625,movez=2519.8,mrotx=0,mroty=0,mrotz=0},
 	[4] = {model=8674,scale=1,dim=252,inte=4,x=-19.599609375,y=-312.2001953125,z=2522.8999023438,rotx=0,roty=0,rotz=0,movex=-19.599609375,movey=-312.2001953125,movez=2519.8,mrotx=0,mroty=0,mrotz=0},
	[5] = {model=5422,scale=1,dim=252,inte=4,x=-19.900390625,y=-300.599609375,z=2523.3000488281,rotx=0,roty=0,rotz=0,movex=-19.900390625,movey=-300.599609375,movez=2526.7,mrotx=0,mroty=0,mrotz=0},
	[6] = {model=8674,scale=1,dim=252,inte=4,x=-16.7001953125,y=-302.2998046875,z=2522.8999023438,rotx=0,roty=0,rotz=270,movex=-16.7001953125,movey=-302.2998046875,movez=2519.8,mrotx=0,mroty=0,mrotz=0},
	[7] = {model=2930,scale=1,dim=383,inte=5,x=-1318.4835205078,y=-565.93670654297,z=15.73779964447,rotx=0,roty=0,rotz=30,movex=-1319.2645263672,movey=-564.56878662109,movez=15.73779964447,mrotx=0,mroty=0,mrotz=0},
	[8] = {model=2930,scale=1,dim=383,inte=5,x=-1321.7265625,y=-560.44848632813,z=15.73779964447,rotx=0,roty=0,rotz=30,movex=-1320.9000244141,movey=-561.84851074219,movez=15.73779964447,mrotx=0,mroty=0,mrotz=0},
	[9] = {model=2930,scale=1,dim=383,inte=5,x=-1323.0008544922,y=-558.09429931641,z=15.73779964447,rotx=0,roty=0,rotz=30,movex=-1323.7818603516,movey=-556.72637939453,movez=15.73779964447,mrotx=0,mroty=0,mrotz=0},
	[10] = {model=8674,scale=1,dim=252,inte=4,x=-8.2998046875,y=-332,z=2519.1999511719,rotx=0,roty=90,rotz=0,movex=-8.2998046875,movey=-332,movez=2516,mrotx=0,mroty=0,mrotz=0},
	[11]	= {model=5422,scale=1,dim=252,inte=4,x=48.7998046875,y=-316.2998046875,z=2523.3220214844,rotx=0,roty=0,rotz=0,movex=48.7998046875,movey=-316.2998046875,movez=2526.3,mrotx=0,mroty=0,mrotz=0},
}



puertas_comisaria = {

	[1] = {model=3089,scale=1,dim=383,inte=5,x=-1309.2049560547,y=-544.33331298828,z=16.831499099731,rotx=0,roty=0,rotz=30,movex=-1309.2049560547,movey=-544.33331298828,movez=16.831499099731,mrotx=0,mroty=0,mrotz=-50},

}
barrerasHospital = {}

barrerasHospital[1] = {
	obj = createObject( 968, 2102.359375, -1450.5517578125, 23.901956558228,0,270,269 ), 
	rot = { 0, -90, 0 },
	nrotation ={0,90,0}, 
	abierto = false,
	timerobj = nil,
	tipo = 1, -- 1 = rotacion, 2 = movimiento
}

barrerasTaxi = {}

barrerasTaxi[1] = {
	obj = createObject( 968, 1372.857421875, -1882.3837890625, 13.3,0,270,0 ), 
	rot = { 0, -90, 0 },
	nrotation ={0,90,0}, 
	abierto = false,
	timerobj = nil,
	tipo = 1, -- 1 = rotacion, 2 = movimiento
}


barrerasPoli = {}

barrerasPoli[1] = {
	obj = createObject( 968, 1544.69140625, -1630.82421875, 13.152153320312,0,270,269 ), 
	rot = { 0, -90, 0 },
	nrotation ={0,90,0}, 
	abierto = false,
	timerobj = nil,
	tipo = 1, -- 1 = rotacion, 2 = movimiento
}

barrerasPoli[2] = {

	obj = createObject( 969, 1933.3924560547,170.24360656738,36.450199127197,0,0,342 ),
	pos = { 1933.3924560547,170.24360656738,36.450199127197 },
	npos = { 1941.7380371094,167.50259399414,36.450199127197 },
	tipo = 2,
	abierto = false,
}

barrerasPoli[3] = {
	obj = createObject( 968, 1997.19921875, -1351.095703125, 23.879964447021,0,270,180 ), 
	rot = { 0, -90, 0 },
	nrotation ={0,90,0}, 
	abierto = false,
	timerobj = nil,
	tipo = 1, -- 1 = rotacion, 2 = movimiento
}





function barrerapoli( player, cmd, id )
	local faccs = exports.facciones:getPlayerFaction(player)
	if faccs[1] == 2 or faccs[2] == 2 then
		if id and tonumber(id) then
			if barrerasPoli[tonumber(id)] then
				local barra = barrerasPoli[tonumber(id)]
				local x, y, z = getElementPosition( player )
				local px, py, pz = getElementPosition( barra.obj )
				local int, dim = getElementInterior( player ), getElementDimension( player )
				local intp, dimp = getElementInterior(barra.obj ), getElementDimension( barra.obj )
				if getDistanceBetweenPoints3D( x, y, z, px, py, pz ) < 8 and int == intp and dim == dimp then
					if barra.abierto == false then
						barra.abierto = true
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.nrotation ) )
							end
							
							--setElementRotation( barra.obj, unpack( barra.nrotation )  )	
						else
						
							moveObject( barra.obj, 2000, unpack( barra.npos ) )
						end
					else
						barra.abierto = false
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.rot ) )
							end
							--setElementRotation( barra.obj, unpack( barra.rot )  )
						else
							moveObject( barra.obj, 2000, unpack( barra.pos ) )
						end
					end
				end
			else
				outputChatBox( "No hay barrera con esa ID", player, 255, 0, 0 )
			end
		end
	end
end
addCommandHandler("bpd", barrerapoli)


function barrerataxi( player, cmd, id )
	local faccs = exports.facciones:getPlayerFaction(player)
	if faccs[1] == 3 or faccs[2] == 3 then
		if id and tonumber(id) then
			if barrerasTaxi[tonumber(id)] then
				local barra = barrerasTaxi[tonumber(id)]
				local x, y, z = getElementPosition( player )
				local px, py, pz = getElementPosition( barra.obj )
				local int, dim = getElementInterior( player ), getElementDimension( player )
				local intp, dimp = getElementInterior(barra.obj ), getElementDimension( barra.obj )
				if getDistanceBetweenPoints3D( x, y, z, px, py, pz ) < 8 and int == intp and dim == dimp then
					if barra.abierto == false then
						barra.abierto = true
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.nrotation ) )
							end
							
							--setElementRotation( barra.obj, unpack( barra.nrotation )  )	
						else
						
							moveObject( barra.obj, 2000, unpack( barra.npos ) )
						end
					else
						barra.abierto = false
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.rot ) )
							end
							--setElementRotation( barra.obj, unpack( barra.rot )  )
						else
							moveObject( barra.obj, 2000, unpack( barra.pos ) )
						end
					end
				end
			else
				outputChatBox( "No hay barrera con esa ID", player, 255, 0, 0 )
			end
		end
	end
end
addCommandHandler("taxi", barrerataxi)


function barrerahospital( player, cmd, id )
	local faccs = exports.facciones:getPlayerFaction(player)

	if faccs[1] == 1 or faccs[2] == 1 then
		if id and tonumber(id) then
			if barrerasHospital[tonumber(id)] then
				local barra = barrerasHospital[tonumber(id)]
				local x, y, z = getElementPosition( player )
				local px, py, pz = getElementPosition( barra.obj )
				local int, dim = getElementInterior( player ), getElementDimension( player )
				local intp, dimp = getElementInterior(barra.obj ), getElementDimension( barra.obj )
				if getDistanceBetweenPoints3D( x, y, z, px, py, pz ) < 8 and int == intp and dim == dimp then
					if barra.abierto == false then
						barra.abierto = true
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.nrotation ) )
							end
							
							--setElementRotation( barra.obj, unpack( barra.nrotation )  )	
						else
						
							moveObject( barra.obj, 2000, unpack( barra.npos ) )
						end
					else
						barra.abierto = false
						if barra.tipo == 1 then
							if not barra.timerobj then
								barra.timerobj = setTimer( function() barra.timerobj = nil end, 2500, 1 )
								moveObject( barra.obj, 2000, px, py, pz, unpack( barra.rot ) )
							end
							--setElementRotation( barra.obj, unpack( barra.rot )  )
						else
							moveObject( barra.obj, 2000, unpack( barra.pos ) )
						end
					end
				end
				
			else
				outputChatBox( "No hay barrera con esa ID", player, 255, 0, 0 )
			end
		end
	
end
end
addCommandHandler("bmd", barrerahospital)



puertas_carcel_obj = {}
function loadPuertasCarcel()
	for k,puerta in pairs(puertas_carcel) do
		puertas_carcel_obj[k] = createObject ( puerta.model, puerta.x, puerta.y, puerta.z, puerta.rotx, puerta.roty, puerta.rotz )
		setObjectScale(puertas_carcel_obj[k], puerta.scale)
		setElementDimension(puertas_carcel_obj[k], puerta.dim)
		setElementInterior(puertas_carcel_obj[k], puerta.inte)
	end

	for k,puerta in pairs(puertas_comisaria) do
		puertas_carcel_obj[k] = createObject ( puerta.model, puerta.x, puerta.y, puerta.z, puerta.rotx, puerta.roty, puerta.rotz )
		setObjectScale(puertas_carcel_obj[k], puerta.scale)
		setElementDimension(puertas_carcel_obj[k], puerta.dim)
		setElementInterior(puertas_carcel_obj[k], puerta.inte)
	end
end
addEventHandler("onResourceStart", resourceRoot, loadPuertasCarcel)

function puertasCarcel(player, cmd, id)
local factions = exports.facciones:getPlayerFaction(player)
if factions[1] == 2 or factions[2] == 2 then
	if id and tonumber(id) then
		if puertas_carcel_obj[tonumber(id)] then
			local x, y, z = getElementPosition( player )
			local px, py, pz = getElementPosition( puertas_carcel_obj[ tonumber(id) ] )
			local int, dim = getElementInterior( player ), getElementDimension( player )
			local intp, dimp = getElementInterior( puertas_carcel_obj[ tonumber(id) ]  ), getElementDimension( puertas_carcel_obj[ tonumber(id) ]  )
			if getDistanceBetweenPoints3D( x, y, z, px, py, pz ) < 5 and int == intp and dim == dimp then
				if not getElementData(puertas_carcel_obj[tonumber(id)], "abierto") then 
					moveObject (puertas_carcel_obj[tonumber(id)], 3000, puertas_carcel[tonumber(id)].movex,puertas_carcel[tonumber(id)].movey, puertas_carcel[tonumber(id)].movez, puertas_carcel[tonumber(id)].mrotx,puertas_carcel[tonumber(id)].mroty,puertas_carcel[tonumber(id)].mrotz)
					setElementData(puertas_carcel_obj[tonumber(id)], "abierto", true)
				else
					moveObject (puertas_carcel_obj[tonumber(id)], 3000, puertas_carcel[tonumber(id)].x,puertas_carcel[tonumber(id)].y, puertas_carcel[tonumber(id)].z, 0,0,0)
					removeElementData(puertas_carcel_obj[tonumber(id)], "abierto")
				end
			else
				outputChatBox( "Debes de estar cerca de la puerta para poder abrirla.", player, 255, 0, 0 )
			end
		else
			outputChatBox( "No hay puerta con esa ID", player, 255, 0, 0 )
		end
	else
		exports.login:addNotification(player, "No has introducido un ID válido", "error")
	end
end
end
addCommandHandler("puertacarcel", puertasCarcel)


function puertasComisaria(player,cmd,id)
local factions = exports.facciones:getPlayerFaction(player)
if factions[1] == 2 or factions[2] == 2 then
	if id and tonumber(id) then
		if not getElementData(puertas_carcel_obj[tonumber(id)], "abierto") then 
			moveObject (puertas_carcel_obj[tonumber(id)], 1000, puertas_comisaria[tonumber(id)].movex,puertas_comisaria[tonumber(id)].movey, puertas_comisaria[tonumber(id)].movez, puertas_comisaria[tonumber(id)].mrotx,puertas_comisaria[tonumber(id)].mroty,puertas_comisaria[tonumber(id)].mrotz)
			setElementData(puertas_carcel_obj[tonumber(id)], "abierto", true)
		else
			moveObject (puertas_carcel_obj[tonumber(id)], 1000, puertas_comisaria[tonumber(id)].x,puertas_comisaria[tonumber(id)].y, puertas_comisaria[tonumber(id)].z, 0,0,50)
			removeElementData(puertas_carcel_obj[tonumber(id)], "abierto")
		end
	else
		exports.login:addNotification(player, "No has introducido un ID válido", "error")
	end
end
end
addCommandHandler("comisaria", puertasComisaria)